<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Kompot</title>
<link rel="stylesheet" href="bootstrap.min.css">
<script src="jquery.min.js"></script>
<style type="text/css">
	.error {color:red;}
	.hidden {visibility: hidden;}
</style>
</head>
<body>
<!--check and set role-->
<script src="/WebProjekat/checkRole.js"></script>
<script type="text/javascript">
checkRedirect(["NEULOGOVAN"], "SiteTemplate.html")
</script>
<!--check and set role end-->

<!--naviagtion-->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
	<a class="navbar-brand" href="#">Kompot</a>
	<div class="navbar-collapse">
		<ul class="navbar-nav mr-auto" id="levo">
		</ul>
		<ul class="navbar-nav" id="desno">
		</ul>
	</div>
</nav>
<script src="/WebProjekat/navBar.js"></script>
<!--naviagtion end-->

<form class="mx-auto" style="width: 200px;">
	<div class="form-group">
		<label for="email">Email address</label>
		<input type="text" class="form-control" id="email">
		<div class="error hidden" id="emailError">Please enter your email address.</div>
 	</div>
	<div class="form-group">
		<label for="password">Password</label>
		<input type="password" class="form-control" id="password">
		<div class="error hidden" id="passwordError">Please enter your password.</div>
 	</div>
	<div class="form-group">
		<input type="submit" id="submit" value="login">
 	</div>
</form>

<script type="text/javascript">
	$('form').submit(function(event) {
		var invalid = false;
		if($("#email").val() === "") {
			invalid = true;
			$("#emailError").removeClass("hidden");
		}
		else {
			$("#emailError").addClass("hidden");
		}
		if($("#password").val() === "") {
			invalid = true;
			$("#passwordError").removeClass("hidden");
		}
		else {
			$("#passwordError").addClass("hidden");
		}
		var data = {
				name: $('#email').val(),
				password: $('#password').val(),
		}
		var s = JSON.stringify(data);
		$.ajax({
			url: "rest/login",
			type: "POST",
			data: s,
			contentType : "application/json",
			dataType : "json",
			complete: function(data) {
				console.log(data);
				if(data.status === 200) {
					window.location.replace("SiteTemplate.html");
				}
			}
		});
		event.preventDefault();
	});
</script>
</body>
</html>